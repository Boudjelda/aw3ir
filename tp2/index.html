<!DOCTYPE html>
<html lang="fr">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP #2</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <h1>TP #23</h1>
    
    <form action="action.html" method="get">
        <p>
            <label for="name">Nomm</label>
            <input type="text" id="name" name="name" minlength="2" maxlength="20" required />
            <span class="icon-ok">✔</span>
        </p>
        
        <p>
            <label for="firstname">Prénom</label>
            <input type="text" id="firstname" name="firstname" minlength="2" maxlength="20" required />
            <span class="icon-ok">✔</span>
        </p>
        
        <p>
            <label for="birthday">Date de naissance</label>
            <input type="date" id="birthday" name="birthday" required />
            <span class="icon-ok">✔</span>
        </p>
        
        <p>
            <label for="address">Adresse</label>
            <input type="text" id="address" name="address" minlength="5" maxlength="50" required />
            <span class="icon-ok">✔</span>
        </p>
        
        <p>
            <label for="email">Email</label>
            <input type="email" id="email" name="email" minlength="5" maxlength="30" required />
            <span class="icon-ok">✔</span>
        </p>
        
        <button type="submit" class="btn-primary">Envoyer</button>
    </form>

    <script>

        const emailInput = document.getElementById('email');

        function validateEmail() {
            const value = emailInput.value.trim();
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (value.length >= 5 && value.length <= 30 && emailRegex.test(value)) {
                
                emailInput.setCustomValidity('');
            } else {
                emailInput.setCustomValidity('L\'e-mail doit être valide (ex. : nom@exemple.com avec un domaine complet).');
            }
            
            emailInput.reportValidity();
        }

        
        emailInput.addEventListener('input', validateEmail);
        emailInput.addEventListener('blur', validateEmail);

        // Optionnel : Validation globale au submit (pour tous les champs)
        const form = document.querySelector('form');
        form.addEventListener('submit', function(e) {
            // Vérifie si le formulaire est valide (HTML5 + JS custom)
            if (!form.checkValidity()) {
                e.preventDefault();  // Empêche l'envoi si invalide
                form.reportValidity();  // Affiche les erreurs
            }
        });
    </script>
</body>
</html>